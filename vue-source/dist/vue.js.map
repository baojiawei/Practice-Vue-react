{"version":3,"file":"vue.js","sources":["../src/utils.js","../src/observe/index.js","../src/state.js","../src/init.js","../src/index.js"],"sourcesContent":["/**\n * 判断数据是不是对象\n */\nexport function isObject(obj) {\n  return typeof obj === 'object' && obj !== null\n}","import { isObject } from '../utils'\nclass Observe {\n  constructor(data) {\n    this.walk(data) // 对数据一步步处理\n  }\n  walk(data) {\n    // 对象的循环 data:{msg: 'bbb', age: 12}\n    Object.keys(data).forEach((key) => {\n      defineReactive(data, key, data[key]) // 定义响应式的数据变化\n    })\n  }\n}\n// vue2的性能 递归重写get和set 一次性递归到底 proxy可以解决\nfunction defineReactive(data, key, value) {\n  observe(value) // 如果传入的值还是一个对象的话，就做递归循环监测\n  Object.defineProperty(data, key, {\n    get() {\n      return value\n    },\n    set(newValue) {\n      if (newValue === value) {\n        return\n      }\n      observe(newValue) // 监控当前设置的值，有可能用户给了一个新值还是对象\n      value = newValue\n    },\n  })\n}\n\nexport function observe(data) {\n  // 对象就是使用defineProperty 来实现响应式原理\n\n  // 如果这个数据不是对象 或者是null 那就不用监控了\n  if (!isObject(data)) {\n    return\n  }\n  // 对数据进行defineProperty\n  return new Observe(data) // 可以看到当前数据是否被观测过\n}\n","import { observe } from './observe/index'\nexport function initState(vm) {\n  const opts = vm.$options\n  if (opts.props) {\n    initProps(vm)\n  }\n  if (opts.methods) {\n    initMethods(vm)\n  }\n  if (opts.data) {\n    initData(vm)\n  }\n}\n\nfunction initProps(vm) {}\n\nfunction initMethods(vm) {}\n\nfunction initData(vm) {\n  // 数据响应式原理\n  let data = vm.$options.data // 用户传入的数据\n  // vm._data是监测后的数据\n  data = vm._data =typeof data === 'function' ? data.call(vm) : data\n  // 观测数据\n  observe(data) // 观测这个数据\n}\n","import { initState } from './state'\nexport function initMixin(Vue) {\n  Vue.prototype._init = function (options) {\n    // Vue的内部 $options 就是用户传递的所有参数\n    const vm = this\n    vm.$options = options // 用户传入的参数\n\n    initState(vm) // 初始化状态\n  }\n}","import {initMixin} from './init'\nfunction Vue(options) {\n  // 内部要进行初始化操作\n  this._init(options)\n}\n\ninitMixin(Vue)\nexport default Vue\n"],"names":["isObject","obj","Observe","data","walk","Object","keys","forEach","key","defineReactive","value","observe","defineProperty","get","set","newValue","initState","vm","opts","$options","props","methods","initData","_data","call","initMixin","Vue","prototype","_init","options"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;EAAA;;;EAGO,SAASA,QAAT,CAAkBC,GAAlB,EAAuB;EAC5B,SAAO,QAAOA,GAAP,MAAe,QAAf,IAA2BA,GAAG,KAAK,IAA1C;EACD;;MCJKC;EACJ,mBAAYC,IAAZ,EAAkB;EAAA;;EAChB,SAAKC,IAAL,CAAUD,IAAV,EADgB;EAEjB;;;;2BACIA,MAAM;EACT;EACAE,MAAAA,MAAM,CAACC,IAAP,CAAYH,IAAZ,EAAkBI,OAAlB,CAA0B,UAACC,GAAD,EAAS;EACjCC,QAAAA,cAAc,CAACN,IAAD,EAAOK,GAAP,EAAYL,IAAI,CAACK,GAAD,CAAhB,CAAd,CADiC;EAElC,OAFD;EAGD;;;;;;;EAGH,SAASC,cAAT,CAAwBN,IAAxB,EAA8BK,GAA9B,EAAmCE,KAAnC,EAA0C;EACxCC,EAAAA,OAAO,CAACD,KAAD,CAAP,CADwC;;EAExCL,EAAAA,MAAM,CAACO,cAAP,CAAsBT,IAAtB,EAA4BK,GAA5B,EAAiC;EAC/BK,IAAAA,GAD+B,iBACzB;EACJ,aAAOH,KAAP;EACD,KAH8B;EAI/BI,IAAAA,GAJ+B,eAI3BC,QAJ2B,EAIjB;EACZ,UAAIA,QAAQ,KAAKL,KAAjB,EAAwB;EACtB;EACD;;EACDC,MAAAA,OAAO,CAACI,QAAD,CAAP,CAJY;;EAKZL,MAAAA,KAAK,GAAGK,QAAR;EACD;EAV8B,GAAjC;EAYD;;EAEM,SAASJ,OAAT,CAAiBR,IAAjB,EAAuB;EAC5B;EAEA;EACA,MAAI,CAACH,QAAQ,CAACG,IAAD,CAAb,EAAqB;EACnB;EACD,GAN2B;;;EAQ5B,SAAO,IAAID,OAAJ,CAAYC,IAAZ,CAAP,CAR4B;EAS7B;;ECrCM,SAASa,SAAT,CAAmBC,EAAnB,EAAuB;EAC5B,MAAMC,IAAI,GAAGD,EAAE,CAACE,QAAhB;;EACA,MAAID,IAAI,CAACE,KAAT,EAAgB;;EAGhB,MAAIF,IAAI,CAACG,OAAT,EAAkB;;EAGlB,MAAIH,IAAI,CAACf,IAAT,EAAe;EACbmB,IAAAA,QAAQ,CAACL,EAAD,CAAR;EACD;EACF;;EAMD,SAASK,QAAT,CAAkBL,EAAlB,EAAsB;EACpB;EACA,MAAId,IAAI,GAAGc,EAAE,CAACE,QAAH,CAAYhB,IAAvB,CAFoB;EAGpB;;EACAA,EAAAA,IAAI,GAAGc,EAAE,CAACM,KAAH,GAAU,OAAOpB,IAAP,KAAgB,UAAhB,GAA6BA,IAAI,CAACqB,IAAL,CAAUP,EAAV,CAA7B,GAA6Cd,IAA9D,CAJoB;;EAMpBQ,EAAAA,OAAO,CAACR,IAAD,CAAP,CANoB;EAOrB;;ECxBM,SAASsB,SAAT,CAAmBC,GAAnB,EAAwB;EAC7BA,EAAAA,GAAG,CAACC,SAAJ,CAAcC,KAAd,GAAsB,UAAUC,OAAV,EAAmB;EACvC;EACA,QAAMZ,EAAE,GAAG,IAAX;EACAA,IAAAA,EAAE,CAACE,QAAH,GAAcU,OAAd,CAHuC;;EAKvCb,IAAAA,SAAS,CAACC,EAAD,CAAT,CALuC;EAMxC,GAND;EAOD;;ECRD,SAASS,GAAT,CAAaG,OAAb,EAAsB;EACpB;EACA,OAAKD,KAAL,CAAWC,OAAX;EACD;;EAEDJ,SAAS,CAACC,GAAD,CAAT;;;;;;;;"}